
;===========================================================================
; Super Spark Helper
;===========================================================================

[Statedef 2300]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 0
persistent = 0

[State 3000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 32,32,32
sinadd = 0,0,0,1
invertall = 0
color = 256

;Super Spark left half, facing right
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X <= 0
trigger1 = Facing = 1
anim = 2305
postype = P1
pos = 0,0
facing = -1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 43

;Super Spark right half, facing right
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X > 0
trigger1 = Facing = 1
anim = 2305
postype = P1
pos = 0,0
facing = 1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

;Super Spark left half, facing left
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X < 0
trigger1 = Facing = -1
anim = 2305
postype = P1
pos = 0,0
facing = 1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 43

;Super Spark right half, facing left
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X > 0
trigger1 = Facing = -1
anim = 2305
postype = P1
pos = 0,0
facing = -1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

;Fade out
[State 4001, Fade Out]
type=palfx
trigger1= Time = 34
time=12
sinadd=-255,-255,-255,60

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 43

;===========================================================================
; Hyper Spark Helper
;===========================================================================

[Statedef 2305]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 0
persistent = 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 2
persistent = 0

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 3
persistent = 0

[State 3000, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 32,32,32
sinadd = 0,0,0,1
invertall = 0
color = 256

;Hyper Shockwave
[State 3000, 1]
type = Explod
trigger1 = Time = 3
anim = 2306
postype = P1
pos = 0,0
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0
scale = 1.25,1.25

[State 3000, Super]
type = Helper
trigger1 = Time = 3
persistent = 0
id = 2306
name = "Hyper Spark Effects"
pos = 0,0
postype = P1
stateno = 2307
helpertype = normal
keyctrl = 0
ownpal = 1
supermove = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3000, Super]
type = Explod
trigger1 = Time = 3
sprpriority = 5
anim = 5387
ID = 5387
pos = -2,-103
ownpal = 1
ignorehitpause = 1
supermove = 1
pausemovetime = 32
supermovetime = 32
removetime = 32
bindtime = -1

;Super Spark left half, facing right
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X <= 0
trigger1 = Facing = 1
anim = 2305
postype = P1
pos = 0,0
facing = -1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 43

;Super Spark right half, facing right
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X > 0
trigger1 = Facing = 1
anim = 2305
postype = P1
pos = 0,0
facing = 1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

;Super Spark left half, facing left
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X < 0
trigger1 = Facing = -1
anim = 2305
postype = P1
pos = 0,0
facing = 1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 43

;Super Spark right half, facing left
[State 3000, 1]
type = Explod
trigger1 = Time = 3
trigger1 = Pos X > 0
trigger1 = Facing = -1
anim = 2305
postype = P1
pos = 0,0
facing = -1
sprpriority = 6
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

;Fade out
[State 4001, Fade Out]
type=palfx
trigger1= Time = 34
time=12
sinadd=-255,-255,-255,60

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = Time > 43

;-----------------------------------
; Hyper Ring

[statedef 2306]
type = a
movetype = i
physics = n
anim = 20000
velset = 0,0
sprpriority = -1

[state 5390]
type = explod
trigger1 = !time
pausemovetime = 50
supermovetime = 50
removetime = 15
bindtime = -1
anim = 2307
pos = 0, 0
scale = 0,0
sprpriority = 6
id = 2307
removeongethit = 1

[state 5390, modifyexplod]
type = modifyexplod
trigger1 = 1
id = 2307
scale = time*.1,time*.1

[state 5390, palfx]
type = palfx
trigger1 = time = [0,50]
time = 1
add = -time*16,-time*16,-time*16

[state 5390, Destroyself]
type = Destroyself
trigger1 = time >= 50

;-----------------------------------
; Hyper Special Effect

[statedef 2307]
type = A
movetype = I
physics = N
anim = 20000
sprpriority = -1

[state 5391, Linhas para Cima]
type = explod
trigger1 = !Time
pausemovetime = 30
supermovetime = 30
removetime = 30
bindtime = -1
anim = 2308
pos = 0, 0
sprpriority = 6
id = 2308
removeongethit = 1

[state 5391, Linhas para Baixo]
type = explod
trigger1 = !Time
pausemovetime = 30
supermovetime = 30
removetime = 30
bindtime = -1
anim = 2308
pos = 0, 0
sprpriority = 6
id = 2308
removeongethit = 1
facing = -1
vfacing = -1

[state 5391, ModifyExplod]
type = modifyexplod
trigger1 = 1
id = 2308
scale = time*.1,time*.1;ifelse(time<=10,time*.2,time*.07),ifelse(time<=10,time*.2,time*.07)

[state 5391, PalFx]
type = palfx
trigger1 = time = [10,50]
time = 1
add = -time*13,-time*13,-time*13

[state 5391, Hyper Ring]
type = helper
trigger1 = Time = 11
name = "Hyper Ring"
id = 2306
stateno = 2306
postype = p1
pos = 0, 0
sprpriority = 10
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0
supermovetime = 50
pausemovetime = 50

[state 5391, Particles]
type = helper
trigger1 = Time = 11
name = "Particles"
id = 2308
stateno = 2308
postype = p1
pos = 0,0
sprpriority = -1
bindtime = 1
ownpal = 1
ignorehitpause = 1
persistent = 0

[state 5391, Destroyself]
type = Destroyself
trigger1 = time >= 30

;--------------------
; Particles

[StateDef 2308]
Type = S
movetype = I
physics = N
ctrl = 0
anim = 20000

[state 5392, Scale]
Type = VarSet
trigger1 = time = 0
fvar(1) = 0.2 + 0.8 * random/1000.0

[State 5392, Generate my angle orientation]
Type = VarSet
trigger1 = !var(48)
fvar(0) = 10.0 + 20.0 * random/1000.0

[State 5392, Generate my angle orientation]
Type = VarSet
trigger1 = var(48) > 0
fvar(0) = 45 + fvar(0)

[State 5392, Convert it to radians]
Type = VarSet
trigger1 = time = 0
fvar(2) = fvar(0) * 0.01745329

[State 5392, Explod]
Type = Explod
trigger1 = time = 0
anim = 2309
pos = 0,0
random = 20, 16
ownpal = 1
id = 2312
sprpriority = 3
ignorehitpause = 1
vel = 10.5 * cos(fvar(2)), 10.5 * -(1.0 - abs(cos(fvar(2)))) * ifelse(var(48) >= 4, -1, 1)
accel = -0.4 * cos(fvar(2)), -0.4 * -(1.0 - abs(cos(fvar(2)))) * ifelse(var(48) >= 4, -1, 1)
scale = fvar(1)+0.75, fvar(1)+0.75
facing = 1
supermove = 9999999
pausemovetime = 999999

[State 5392, VarAdd]
Type = VarAdd
trigger1 = time = 0
v = 48
value = 1

[State 5392, Loop]
Type = ChangeState
trigger1 = var(48) < 12
value = 2308

[State 5392, DestroySelf]
Type = DestroySelf
trigger1 = var(48) = 12

;===========================================================================
; Hyper Portrait Helper
;===========================================================================

[StateDef 2309]
Type = S
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 3101, Portrait]
type = explod
trigger1 = Time = 0
trigger1 = root, stateno != 14500
anim = 2667
id = 2667
postype = back
sprpriority = -2
removetime = -1
pos = 0,0
scale = .9,.9
bindtime = -1
removeongethit = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3101, Portrait]
type = explod
trigger1 = Time = 0
trigger1 = root, stateno = 14500
anim = 2668
id = 2667
postype = back
sprpriority = -2
removetime = -1
pos = 0,0
scale = .9,.9
bindtime = -1
removeongethit = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = Time > 38
id = 2667
postype = back
sprpriority = -2
removetime = -1
pos = 0,0
bindtime = -1
removeongethit = 1
scale = .9+(statetime-38)*0.02,.9+(statetime-38)*0.02
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 49
id = 2667

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time > 49

;===========================================================================
; Ultimate Portrait Helper
;===========================================================================

[StateDef 2301]
Type = S
movetype = I
physics = N
ctrl = 0
anim = 20000

[State 3101, Portrait]
type = explod
trigger1 = Time = 0
anim = 2669
id = 2669
postype = back
sprpriority = -2
removetime = -2
pos = 0,0
scale = .9,.9
bindtime = -1
removeongethit = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 820,PlaySnd]
type = PlaySnd
trigger1 = Time = 11
value = 3000, 4
persistent = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time > 64

;===========================================================================
; Super Cancel Helper
;===========================================================================

[Statedef 2310]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State -2, NiceHit]
type = PlaySnd
trigger1 = Time = 0
persistent = 0
value = 7501,1
volume = 255
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = !root, Var(55)
triggerall = P2Name != "Shao Kahn"
triggerall = Enemy, AuthorName != "OmegaPsycho"
triggerall = NumHelper(7010) = 0
trigger1 = Time = 1
persistent = 0
value = 7504,20
volume = 300
abspan = 1

[State 3000, 1] ;Super Cancel Enter
type = Explod
trigger1 = Time = 0
anim = 30012
id = 30120
postype = left
pos = 320,-48
vel = -40,0
facing = 1

sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Super Cancel Entry]
type = RemoveExplod
trigger1 =  time > 5
id =  30120
;ignorehitpause =
;persistent =

[State 3000, 1] ;Super Cancel Freeze
type = Explod
trigger1 = Time = 5
anim = 30012
id = 30121
postype = left
pos = 0,-48
vel = 0,0
facing = 1
bindtime = -1
sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Super Cancel Freeze]
type = RemoveExplod
trigger1 =  time > 35
id =  30121
;ignorehitpause =
;persistent =

[State 3000, 1] ;Super Cancel Exit
type = Explod
trigger1 = Time = 35
anim = 30012
id = 30122
postype = left
pos = 0,-48
vel = -40,0
facing = 1

sprpriority = 7
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 2310, Kill Super Cancel Exit]
type = RemoveExplod
trigger1 =  time > 40
id =  30122
;ignorehitpause =
;persistent =

[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 40
;ignorehitpause =
;persistent =

;===========================================================================
; Dream Cancel Custom State
;===========================================================================

[Statedef 30013]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1506, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3668, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
persistent = 0
value = 5300

[Stage 3668, End]
type = ChangeState
trigger1 = Time > 500
value = 0
ctrl = 1

;---------------
; Burning Corpse

[Statedef 30162]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 19171
ctrl = 0
sprpriority = 0

[State ]
type = PosSet
trigger1 = !time
y = 0

[State 3002, 2]
type = PlaySnd
trigger1 = !time
value = 7507,2
volume = 300

[State 3002, 2]
type = PlaySnd
trigger1 = !time
value = 7507,3
volume = 300

[State rojo]
type = EnvColor
trigger1 = !time || time = 120
value = 255,0,0
time = 10
ignorehitpause = 1

[State explosion snd1]
type = PlaySnd
trigger1 = time = 120
value = 7507,4
volume = 300

[State explosion shake]
type = EnvShake
trigger1 = time = 120
time = 20
ampl = -10
ignorehitpause = 1

[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "craneo"
stateno = 30163
ownpal = 1

[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = -1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = -1

[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = -1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = -1

[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = -1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = -1

[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 1"
stateno = 30164
ownpal = 1
facing = -1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = 1
[State burn]
type = Helper
trigger1 = time = 120
helpertype = Normal
name = "Hueso 2"
stateno = 30165
ownpal = 1
facing = -1

[State END]
type = DestroySelf
trigger1 = time = 121

;-----------------------------------------
;burn craneo
[Statedef 30163]
type    = A
movetype= I
physics = N
anim = 80054
velset = 0,-15
ctrl = 0
sprpriority = 2

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -6,-4

[State ]
type = veladd
trigger1 = time = 2
y = var(0)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .4

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;------------------------------------
;burn bone 1
[Statedef 30164]
type    = A
movetype= A
physics = N
anim = 80055
ctrl = 0
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -12,-8

[State x]
type = VarRandom
trigger1 = 1
v = 1
range = 1,3

[State ]
type = veladd
trigger1 = time = 2
y = var(0)-(random*.001)
x = (var(1)/2)+(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .3

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;------------------------------------
;burn bone 2
[Statedef 30165]
type    = A
movetype= A
physics = N
anim = 80056
ctrl = 0
sprpriority = 2

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 35

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -11,-9

[State x]
type = VarRandom
trigger1 = 1
v = 1
range = 1,3

[State ]
type = veladd
trigger1 = time = 2
y = var(0)-(random*.001)
x = (var(1)/2)+(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .3

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;------helper Invisivel-------

[Statedef 3201]
type = S
anim = 20000
sprpriority = 7

[State 3000, Charge]
type=explod
trigger1 = Time = 0
anim=1500
sprpriority=5
postype=p1
pos=-9,-35
removetime=50
;scale=0.5,0.5
pausemovetime = 400

[State 3000, Charge]
type=explod
trigger1 = Time = 0
anim=1500
sprpriority=5
postype=p1
pos=5,-39
removetime=50
;scale=0.5,0.5
pausemovetime = 400

[State 190, Concentrando gelo]
type=helper
trigger1=time%7&&numhelper(191)<8
helpertype=normal
stateno=3304
ID=191
name="Power Particle"
postype=p1
pos=ceil(240-random/2.1),-ceil(random/4)
size.yscale = .15
size.xscale = .15
supermovetime = 400
pausemovetime = 400

[State 9999, DestroySelf]
type = DestroySelf
trigger1 = Time >=50


;-------------------

;( O Projetil )

[Statedef 3302]
type = A
movetype = A
poweradd = 0
physics = N
juggle = 0
ctrl = 0
anim = 7200
sprpriority = 5
;Vel = 0,0

[State 3002, 2]
type = PlaySnd
trigger1 = Time = 1
value = 7507,1
volume = 255

[State 3002, Assertspecial]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3002, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3010, 2]
type = HitDef
trigger1 = Time %3 = 0 && Time <= 60
attr = A, HP
damage = 7,3
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 6 , Hit
sprpriority = 6
pausetime = 0, 2
sparkno = S7001
guard.sparkno = -1
sparkxy = -10,0
hitsound   = S5,0
guardsound = 6, 0
ground.type = Low
ground.slidetime = 57
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -5, -1
air.hittime = 20
;palfx.time = 50
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
guard.kill = 0
;palfx.add = 0,156,198
;palfx.mul = 13,179,199

[State 3010, 3]
type = HitDef
trigger1 = Time = 60
attr = A, HP
damage = 75
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 7,Hit
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1
sparkno = -1
sparkxy = 0, 0
hitsound   = S5,0
guardsound = 6, 0
ground.type = High
ground.slidetime = 50
ground.hittime  = 20
ground.velocity = -26, -7
airguard.velocity = -5
air.type = High
air.velocity = -28, -9
air.hittime = 20
fall = 1
air.fall = 1
fall.recover = 0
;palfx.time = 50
;palfx.add = 0,156,198
;palfx.mul = 13,179,199
kill = 1
guard.kill = 1

[State 3002, Destroy]
type = DestroySelf
trigger1 = animtime = 0

;------helper Invisivel-------

[Statedef 3303]
type = S
anim = 20000
sprpriority = 7

[State 3000, Charge]
type=explod
trigger1 = Time = 0
anim=1500
sprpriority=5
postype=p1
pos=-7,-43
removetime=50
;scale=0.5,0.5
pausemovetime = 400

[State 3000, Charge]
type=explod
trigger1 = Time = 0
anim=1500
sprpriority=5
postype=p1
pos=7,-47
removetime=50
;scale=0.5,0.5
pausemovetime = 400

[State 190, Concentrando gelo]
type=helper
trigger1=time%7&&numhelper(191)<8
helpertype=normal
stateno=3304
ID=191
name="Power Particle"
postype=p1
pos=ceil(240-random/2.1),-ceil(random/4)
size.yscale = .15
supermovetime = 400
pausemovetime = 400

[State 9999, DestroySelf]
type = DestroySelf
trigger1 = Time >=50

;-----helper particulas-------

[Statedef 3304]
type = S
anim = 1501
sprpriority = 7

[State 191, vel]
type=velset
trigger1=!time
x=(rootdist x-4)/60
y=(rootdist y-55)/60

[State 9999, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 9999, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0


;-------------------

;( O Projetil )

[Statedef 3952]
type = A
movetype = A
poweradd = 0
physics = N
juggle = 0
ctrl = 0
anim = 7055
sprpriority = 5
;Vel = 0,0

[State 3002, 2]
type = PlaySnd
trigger1 = Time = 1
value = 7506,0

; wind sound
[State 3000, snd]
type = PlaySnd
trigger1 = Time = 2
value = 7506,1
volume = 255
abspan = 1

[State 3002, Assertspecial]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3002, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3010, 2]
type = HitDef
trigger1 = Time %3 = 0 && Time <= 72
attr = A, HP
damage = 10,5
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 6 , Hit
sprpriority = 6
pausetime = 0, 2
sparkno = S7105
guard.sparkno = -1
sparkxy = -10,0
;hitsound = S20, 0
guardsound = 6, 0
ground.type = Low
ground.slidetime = 57
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -5, -1
air.hittime = 20
palfx.time = 50
fall = 1
air.fall = 1
fall.recover = 0
palfx.add = 0,156,198
palfx.mul = 13,179,199
kill = 0
guard.kill = 0

[State 3010, 3]
type = HitDef
trigger1 = Time = 73
attr = A, HP
damage = 75
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 7,Hit
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1
sparkno = -1
sparkxy = 0, 0
;hitsound = S1, 10
guardsound = 6, 0
ground.type = High
ground.slidetime = 50
ground.hittime  = 20
ground.velocity = -26, -7
airguard.velocity = -5
air.type = High
air.velocity = -28, -9
air.hittime = 20
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 50
palfx.add = 0,156,198
palfx.mul = 13,179,199
kill = 1
guard.kill = 1

[State 6040, Fumaça gelada]
type=explod
trigger1=Movehit&&(P2stateno=[5000,5999])
anim=7060
ID=7060
sprpriority=3
postype=p2
vel=-.2,-.75
pos=(enemynear,const(size.mid.pos.x)),(enemynear,const(size.mid.pos.y))+10
random=40,50
removetime=-2
ownpal=1
removeongethit = 1
bindtime = -1

[State 3000, Bloco de gelo]
type = Helper
triggerall = NumHelper(7030)= 0
trigger1 = MoveHit&&time = 73
helpertype = Normal
ID = 3006
name = "Boco de gelo"
postype = p2
pos=(enemynear,const(size.mid.pos.x)),(enemynear,const(size.mid.pos.y))+10
stateno = 3955
ownpal = 1
keyctrl = 0

[State 3002, Destroy]
type = DestroySelf
trigger1 = animtime = 0

;------helper Invisivel-------

[Statedef 3953]
type = S
anim = 20000
sprpriority = 7

[State 190, Concentrando gelo]
type=helper
trigger1=time%7&&numhelper(191)<8
helpertype=normal
stateno=3954
ID=191
name="Power Particle"
postype=p1
pos=ceil(240-random/2.1),-ceil(random/4)
size.yscale = .15
supermovetime = 400
pausemovetime = 400

[State 9999, DestroySelf]
type = DestroySelf
trigger1 = Time >=50

;-----helper particulas-------

[Statedef 3954]
type = S
anim = 7020
sprpriority = 7

[State 191, vel]
type=velset
trigger1=!time
x=(rootdist x-4)/60
y=(rootdist y-55)/60

[State 9999, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 9999, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;------Bloco de gelo-------

[Statedef 3955]
type = a
movetype = i
physics = N
anim = 20000
sprpriority = 99

[State 0, ]
type = Explod
trigger1 = time =0
anim = 7030
ID = 7030
pos = 0,-50
postype = p2
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -1

[State 0, ]
type = RemoveExplod
trigger1 = P2Stateno = 5100||Time =80
ID = 7030

[State 0, ]
type = Explod
triggerall = Numexplod(7031)=0
trigger1 = P2Stateno = 5100||Time=80
anim = 7031
ID = 7031
pos = 0,-50
postype = p2
bindtime = -1
sprpriority = 600
ownpal = 1
removetime = -2

[State 0, 0]
type = RemoveExplod
trigger1 = Time = 10
ID = 7031

[State 3000, snd]
type = PlaySnd
trigger1 = P2Stateno = 5100||Time=80
value = 7505,2

[State -3, 0]
type = EnvShake
trigger1 = P2Stateno = 5100
time = 2
ampl = -5

[State 9999, DestroySelf]
type = DestroySelf
trigger1 = P2Stateno = 5100||Time=80

;-------------------

;( O Projetil )

[Statedef 3976]
type = A
movetype = A
poweradd = 0
physics = N
juggle = 0
ctrl = 0
anim = 3978
sprpriority = 5
Vel = 0,0

[State 3002, 2]
type = PlaySnd
trigger1 = Time = 1
value = 7509,3
volume = 255

;[State 3002, 2]
;type = PlaySnd
;trigger1 = Time = 1
;value = 2008,4
;volume = 255

[State 3002, Assertspecial]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3002, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3010, 2]
type = HitDef
trigger1 = Time %3 = 0 && Time <= 88
attr = A, HP
damage = 10,5
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 6 , Hit
sprpriority = 6
pausetime = 0, 2
sparkno = S3979
guard.sparkno = -1
sparkxy = -10,0
hitsound   = S7509,4
guardsound = 6, 0
ground.type = Low
ground.slidetime = 57
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -5, -1
air.hittime = 20
;palfx.time = 50
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
guard.kill = 0
;palfx.add = 0,156,198
;palfx.mul = 13,179,199

[State 3010, 3]
type = HitDef
trigger1 = Time = 89
attr = A, HP
damage = 75
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 7,Hit
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1
sparkno = -1
sparkxy = 0, 0
hitsound   = S7509,4
guardsound = 6, 0
ground.type = High
ground.slidetime = 50
ground.hittime  = 20
ground.velocity = -26, -7
airguard.velocity = -5
air.type = High
air.velocity = -28, -9
air.hittime = 20
fall = 1
air.fall = 1
fall.recover = 0
;palfx.time = 50
;palfx.add = 0,156,198
;palfx.mul = 13,179,199
kill = 1
guard.kill = 1

[State 3002, Destroy]
type = DestroySelf
trigger1 = animtime = 0

;-------------------
;Triple Laser Projectile

[Statedef 3981]
type = A
movetype = A
poweradd = 0
physics = N
juggle = 0
ctrl = 0
anim = 3982
sprpriority = 5
Vel = 0,0

[State 3002, 2]
type = PlaySnd
trigger1 = Time = 1
value = 7507,1
volume = 255

[State 3002, Assertspecial]
type = Assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3002, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 3010, 2]
type = HitDef
trigger1 = Time %3 = 0 && Time <= 80
attr = A, HP
damage = 10,5
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 6 , Hit
sprpriority = 6
pausetime = 0, 2
sparkno = S7001
guard.sparkno = -1
sparkxy = -10,0
hitsound   = S5,0
guardsound = 6, 0
ground.type = Low
ground.slidetime = 57
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -5, -1
air.hittime = 20
;palfx.time = 50
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
guard.kill = 0
;palfx.add = 0,156,198
;palfx.mul = 13,179,199

[State 3010, 3]
type = HitDef
trigger1 = Time = 80
attr = A, HP
damage = 75
animtype = Heavy
guardflag = MA
hitflag = MAFD
priority = 7,Hit
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1
sparkno = -1
sparkxy = 0, 0
hitsound   = S5,0
guardsound = 6, 0
ground.type = High
ground.slidetime = 50
ground.hittime  = 20
ground.velocity = -26, -7
airguard.velocity = -5
air.type = High
air.velocity = -28, -9
air.hittime = 20
fall = 1
air.fall = 1
fall.recover = 0
;palfx.time = 50
;palfx.add = 0,156,198
;palfx.mul = 13,179,199
;kill = 1
;guard.kill = 0

[State 3002, Destroy]
type = DestroySelf
trigger1 = animtime = 0

;===========================================================================
; Toasty!
;===========================================================================

[Statedef 7505]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 0, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 41
range = 50

[State 0, VarRandom]
type = VarRandom
trigger1 = Time = 1
v = 43
range = 120

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [0,20]
trigger1 = Time = 25
persistent = 0
value = 7504,0
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [21,40]
trigger1 = Time = 25
persistent = 0
value = 7504,1
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [41,60]
trigger1 = Time = 25
persistent = 0
value = 7504,2
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [61,80]
trigger1 = Time = 25
persistent = 0
value = 7504,3
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [81,100]
trigger1 = Time = 25
persistent = 0
value = 7504,4
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [101,120]
trigger1 = Time = 25
persistent = 0
value = 7504,5
channel = 7
volume = 512
abspan = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = Time = 50
trigger1 = NumHelper(7026) || NumHelper(70260)
channel = 7

[State 3000, 1]
type = Explod
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
anim = 7505
id = 7505
postype = back
pos = 0,240
vel = 0,0
bindtime = -1
ontop = 1
sprpriority = 9999
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
persistent = 0
value = 7503,0
volume = 512
abspan = 1

[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 50
trigger1 = NumExplod(7505) = 0
trigger2 = NumHelper(7010) = 1
;ignorehitpause =
;persistent =

;===========================================================================
; Toasty 3D!
;===========================================================================

[Statedef 75051]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 0, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 41
range = 50

[State 0, VarRandom]
type = VarRandom
trigger1 = Time = 1
v = 43
range = 120

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [0,20]
trigger1 = Time = 25
persistent = 0
value = 7504,6
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [21,40]
trigger1 = Time = 25
persistent = 0
value = 7504,7
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [41,60]
trigger1 = Time = 25
persistent = 0
value = 7504,8
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [61,80]
trigger1 = Time = 25
persistent = 0
value = 7504,9
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [81,100]
trigger1 = Time = 25
persistent = 0
value = 7504,10
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [101,120]
trigger1 = Time = 25
persistent = 0
value = 7504,11
channel = 7
volume = 512
abspan = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = Time = 50
trigger1 = NumHelper(7026) || NumHelper(70260)
channel = 7

[State 3000, 1]
type = Explod
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
anim = 7523
id = 7523
postype = back
pos = 0,240
vel = 0,0
bindtime = -1
ontop = 1
sprpriority = 9999
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
persistent = 0
value = 7503,1
volume = 512
abspan = 1

[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 50
trigger1 = NumExplod(7523) = 0
trigger2 = NumHelper(7010) = 1
;ignorehitpause =
;persistent =

;===========================================================================
; SPAM!
;===========================================================================

[Statedef 75052]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 0, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 41
range = 50

[State 0, VarRandom]
type = VarRandom
trigger1 = Time = 1
v = 43
range = 120

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [0,20]
trigger1 = Time = 25
persistent = 0
value = 7504,12
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [21,40]
trigger1 = Time = 25
persistent = 0
value = 7504,13
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [41,60]
trigger1 = Time = 25
persistent = 0
value = 7504,14
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [61,80]
trigger1 = Time = 25
persistent = 0
value = 7504,15
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [81,100]
trigger1 = Time = 25
persistent = 0
value = 7504,16
channel = 7
volume = 512
abspan = 1

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [0,37]
triggerall = Var(43) = [101,120]
trigger1 = Time = 25
persistent = 0
value = 7504,17
channel = 7
volume = 512
abspan = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = Time = 50
trigger1 = NumHelper(7026) || NumHelper(70260)
channel = 7

[State 3000, 1]
type = Explod
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
anim = 75230
id = 75230
postype = back
pos = 0,240
vel = 0,0
bindtime = -1
ontop = 1
sprpriority = 9998
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State 3000, 1]
type = Explod
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
anim = 75231
id = 75231
postype = back
pos = 0,240
vel = 0,0
bindtime = -1
ontop = 1
sprpriority = 9999
pausemovetime = 99999999999999
supermovetime = 99999999999999
persistent = 0

[State -2, NiceHit]
type = PlaySnd
triggerall = Var(41) = [38,50]
trigger1 = Time = 25
persistent = 0
value = 7503,2
volume = 512
abspan = 1


[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 50
trigger1 = NumExplod(75230) = 0
trigger2 = NumHelper(7010) = 1
;ignorehitpause =
;persistent =

;===========================================================================
; Ice Backfire!
;===========================================================================

[Statedef 75060]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State -2, NiceHit]
type = PlaySnd
trigger1 = Time = 0
persistent = 0
value = 7504,18
abspan = 1
volume = 512

[State 0, 1]
type = Explod
trigger1 = Time = 50
anim = 75340
postype = Left
pos = 160,73
scale = .45,.45
ontop = 1
removetime = -2
bindtime = -1
sprpriority = 10000

[State 3000, 1]
type = Explod
trigger1 = Time = 0
anim = 7535
id = 7535
postype = Left
pos = 160,73
scale = .45,.45
ontop = 1
removetime = 60
bindtime = -1
sprpriority = 9999

[State 2310, DestroySelf]
type = DestroySelf
trigger1 = time > 50
;ignorehitpause =
;persistent =

;------------
; Blood Drops
;------------

[Statedef 7015]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20000
ctrl = 0
sprpriority = 3

[State ò_ó]
type = Explod
trigger1 = time = 1
anim = ceil(ifelse(root,fvar(4) = 1,9999,7010+root,fvar(8)))
id = 7010
Postype = p1
pos = 0,0
vel = -3,0
sprpriority = 1
ownpal = 1
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))
[State ò_ó]
type = Explod
trigger1 = time = 1
anim = ceil(ifelse(root,fvar(4) = 1,9999,7010+root,fvar(8)))
id = 7010
Postype = p1
pos = 0,0
vel = -2.7,-0.5
sprpriority = 1
ownpal = 1
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))
[State ò_ó]
type = Explod
trigger1 = time = 1
anim = ceil(ifelse(root,fvar(4) = 1,9999,7010+root,fvar(8)))
id = 7010
Postype = p1
pos = 0,0
vel = -3.3,-0.9
sprpriority = 1
ownpal = 1
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State end]
type = destroyself
trigger1 = !(parent,animelemtime(1)) || parent,movetype != A || time = 200

[State ]
type = Helper
trigger1 = time = 1 && random < 100
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
trigger1 = time = 1 && random < 100
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
trigger1 = time = 1 ;&& random < 100
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

;------------
; Blood Drops
;------------

[Statedef 7016]
type    = A
movetype= I
physics = N
anim = 7011
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = root,fvar(4) = 1
flag = invisible

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -3,-7
[State x]
type = VarRandom
trigger1 = 1
v = 1
range = -6,-1

[State ]
type = velset
trigger1 = time = 1
y = var(0)+(random*.001)
x = var(1)+(random*.001)

[State ]
type = veladd
trigger1 = time >= 1
y = .3

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = enemynear,prevstateno != 607716 && enemynear,prevstateno != 607721 && enemynear,prevstateno != 607711
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
trigger2 = enemynear,prevstateno = 607711
trigger2 = (Vel Y > 0)&&(Pos Y >= 747)
value = 7017
;-------------------------------------------------------------
;splat
[Statedef 7017]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 7012
velset = 0,0
sprpriority = 1

[State orb]
type = AngleDraw
trigger1 = anim = 70972
scale =.5,.5
[State orb]
type = Trans
trigger1 = anim = 70972
trans = addalpha
alpha = 256-(time*10),256

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = root,fvar(4) = 1
flag = invisible

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 15
range = 1,2

[State 0, gotacae]
type = PlaySnd
triggerall = !root,fvar(4) && !time
trigger1 = (random < 500)
value = 7505,1
channel = -1
volume = -250

[State ]
type = posset
trigger1 = !time
y = ifelse(enemynear,prevstateno = 607711,747,0)

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = destroyself
trigger1 = !animtime

;-----------------
; Large Blood Drop

[Statedef 7037]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 6018
ctrl = 0
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, baja]
type = VelAdd
trigger1 = anim = ceil(6018+root,fvar(8)) && time > 50 && pos Y < 0
y = .4

[State 0, stopbola]
type = VelSet
trigger1 = pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = anim = ceil(6019+root,fvar(8))
y = 6

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel Y = 0 && time > 50 && anim != ceil(6019+root,fvar(8))
value = ceil(6019+root,fvar(8))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = ceil(6019+root,fvar(8)) && !animelemtime(1)
value = S7505,14
volume = -250
channel = -1

[State 0, SprPriority]
type = SprPriority
trigger1 = anim = ceil(6019+root,fvar(8))
value = -1
;---------
; Bleeders
;---------

[Statedef 7018]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20000
ctrl = 0
sprpriority = 3

[State ò_ó]
type = Explod
trigger1 = !time
anim = ceil(ifelse(root,fvar(4) = 1,20000,7013+root,fvar(8)))
id = 7013
Postype = p1
pos = -1,0
sprpriority = 3
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State ò_ó]
type = Explod
trigger1 = !time
anim = ceil(ifelse(root,fvar(4) = 1,20000,7013+root,fvar(8)))
id = 70132
facing = -1
Postype = p1
pos = 0,0
sprpriority = 3
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State end]
type = destroyself
trigger1 = time = 1

[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
facing = -1
[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
facing = -1
[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
facing = -1
[State ]
type = Helper
;triggerall = parent,stateno != 70451
trigger1 = time = 0
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1
facing = -1

;-----------------

[Statedef 7027]
type    = A
movetype= I
physics = N
poweradd= 0
anim = 20000
velset = 0,0
ctrl = 0
sprpriority = 3

[State -3,stagesubway]
type = Helper
trigger1 = root,var(22) = 5016
trigger1 = root,StateNo = 19192
helpertype = Normal
ID = 25007
pos = 160,-219
name = "stageSubway"
stateno = 25007
ownpal = 1
persistent = 0
size.xscale = 1
size.yscale = 1

[Statedef 7028]
type    = A
movetype= I
physics = N
poweradd= 0
anim = 20000
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, 2]
type = PlaySnd
trigger1 = Time = 25
trigger1 = Lose && root, Life = 0
trigger1 = MatchOver
value = 7504,19
abspan = 1
channel = 5
volume = 300
persistent = 0

[State 0, 2]
type = PlaySnd
trigger1 = Win
trigger1 = MatchOver
trigger1 = !root, Var(8)
trigger1 = root, StateNo != [19100,19200]
trigger1 = root, StateNo != 3506
value = 7501,10
abspan = 1
channel = 5
volume = 300
persistent = 0

[State 0, 2]
type = AssertSpecial
trigger1 = RoundState = 4
flag = nobardisplay

[State 0, 2]
type = AssertSpecial
trigger1 = MatchOver
flag = nomusic

[Statedef 7029]
type    = A
movetype= I
physics = N
anim = 20000
velset = 0,0
ctrl = 0
sprpriority = 0

[State 1000, 1]
type = PlaySnd
triggerall = !Time
trigger1 = root, StateNo = [19100,19200]
trigger2 = root, StateNo = 3506
trigger3 = root, StateNo = [9000,9999]
trigger4 = root, StateNo = 120030
value = 7501,0
volume = 300
channel = 5
abspan = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = root, StateNo = 19130
trigger1 = root, Time = 75
trigger2 = root, StateNo = 19140
trigger2 = root, AnimElem = 13
channel = 5

[State 0, VarAdd]
type = VarAdd
trigger1 = time < 35
var(0) = -3

[State 8000, oscuro1]
type = BGPalFX
trigger1 = time < 35
time = 1
add = var(0),var(0),var(0)

[State 8000, oscuro1]
type = BGPalFX
trigger1 = time >= 35
time = 1
add = -105,-105,-105

;----------
; Body Gibs
;----------

[Statedef 70292]
type    = A
movetype= I
physics = N
velset = 0,0
anim = 20000
ctrl = 0
sprpriority = 3

[State sound]
type = PlaySnd
trigger1 = !time
value = 4, 1
channel = 5

[State ]
type = Helper
trigger1 = Time = 0
trigger1 = !parent,var(17) && Parent, StateNo != 19183
helpertype = Normal
name = "Leg"
postype = p1
pos = 0,0
stateno = 70320
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = Time = 0
trigger1 = !parent,var(17) && Parent, StateNo != 19183
helpertype = Normal
name = "Leg"
postype = p1
pos = 0,0
stateno = 70320
ownpal = 1
size.xscale = 1
size.yscale = 1

[State ]
type = Helper
trigger1 = Time = 0
trigger1 = !parent,var(17) && Parent, StateNo != 19183
helpertype = Normal
name = "ribs"
postype = p1
pos = 0,0
stateno = 7031
ownpal = 1
size.xscale = 1
size.yscale = 1

[State ]
type = Helper
trigger1 = Time = 0
trigger1 = !parent,var(17) && Parent, StateNo != 19183
helpertype = Normal
name = "brain container"
postype = p1
pos = 0,0
stateno = 7032
ownpal = 1
size.xscale = 1
size.yscale = 1

[State mk2]
type = Helper
trigger1 = time <= 2
trigger1 = parent,var(17) || Parent, StateNo = 19183
trigger2 = Time = 3
helpertype = Normal
name = "intestino"
postype = p1
pos = 0,0
stateno = 70321
ownpal = 1
size.xscale = 1
size.yscale = 1

[State mk2]
type = Helper
trigger1 = time <= 1
trigger1 = parent,var(17) || Parent, StateNo = 19183
trigger2 = Time = 2
helpertype = Normal
name = "muslo"
postype = p1
pos = 0,0
stateno = 70322
ownpal = 1
size.xscale = 1
size.yscale = 1

[State mk2]
type = Helper
trigger1 = time = 0
trigger1 = parent,var(17) || Parent, StateNo = 19183
trigger2 = Time = 1
helpertype = Normal
name = "cadera"
postype = p1
pos = 0,0
stateno = 70323
ownpal = 1
size.xscale = 1
size.yscale = 1

[State mk2]
type = Helper
trigger1 = time <= 1
trigger1 = parent,var(17) || Parent, StateNo = 19183
trigger2 = Time = 2
helpertype = Normal
name = "mano"
postype = p1
pos = 0,0
stateno = 70324
ownpal = 1
size.xscale = 1
size.yscale = 1

[State mk2]
type = Helper
trigger1 = Time = 0
helpertype = Normal
name = "costillas 2"
postype = p1
pos = 0,0
stateno = 70325
ownpal = 1
size.xscale = 1
size.yscale = 1

[State ]
type = Helper
trigger1 = 1
helpertype = Normal
name = "bone"
postype = p1
pos = 0,0
stateno = 7030
ownpal = 1
size.xscale = 1
size.yscale = 1

[State ò_ó]
type = Explod
trigger1 = !Time && Parent, StateNo != 19183
anim = 7023
Postype = p1
pos = 0,40
sprpriority = 3
[State ò_ó]
type = Explod
trigger1 = !time && Parent, StateNo != 19183
anim = 7023
Postype = p1
pos = 0,0
[State ò_ó]
type = Explod
trigger1 = !time && Parent, StateNo != 19183
anim = 7023
Postype = p1
pos = 0,-40
sprpriority = 3
[State ò_ó]
type = Explod
trigger1 = !Time && Parent, StateNo = 19183
anim = 7023
Postype = p1
pos = -40,0
sprpriority = 3
[State ò_ó]
type = Explod
trigger1 = !Time && Parent, StateNo = 19183
anim = 7023
Postype = p1
pos = 40,0
sprpriority = 3
[State ò_ó]
type = Explod
trigger1 = !time && Parent, StateNo = 19183
anim = 7023
Postype = p1
pos = 0,0
sprpriority = 3
[State shake]
type = EnvShake
trigger1 = !time
time = 20
ampl = -5

[State end]
type = destroyself
trigger1 = time = 18
;-------------------------------------------------------------
;bone
[Statedef 7030]
type    = A
movetype= I
physics = N
anim = 7024
velset = 0,0
ctrl = 0
sprpriority = 3

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)

[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State 0, Explod]
type = null;Explod
triggerall = vel Y < 0 && pos Y < -60
trigger1 = parent,stateno = 7029
trigger2 = parent,stateno = 70292
anim = 7024
ID = 7029
facing = -1
vel = var(0)+(random*.001),var(1)+(random*.001)
accel = 0,.2
random = 30,30
removetime = 300
sprpriority = 5
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033
;---------------------------------------------------------------
;-------------------------------------------------------------
;ribs
[Statedef 7031]
type    = A
movetype= I
physics = N
anim = 7025
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, Explod]
type = null;Explod
trigger1 = vel Y < 0 && pos Y < -60
anim = 7025
ID = 7029
facing = -1
vel = var(0)+(random*.001),var(1)+(random*.001)
accel = 0,.2
random = 30,30
removetime = 120
sprpriority = 5
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033
;-------------------------------------------------------------
;skull
[Statedef 7032]
type    = A
movetype= I
physics = N
anim = 7026
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, Explod]
type = null;Explod
trigger1 = vel Y < 0 && pos Y < -60
anim = 7026
ID = 7029
facing = -1
vel = var(0)+(random*.001),var(1)+(random*.001)
accel = 0,.2
random = 30,30
removetime = 120
sprpriority = 5
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;------------------------------ pie
[Statedef 70320]
type    = A
movetype= I
physics = N
anim = 6977
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, Explod]
type = null;Explod
trigger1 = vel Y < 0 && pos Y < -60
anim = 7026
ID = 7029
facing = -1
vel = var(0)+(random*.001),var(1)+(random*.001)
accel = 0,.2
random = 30,30
removetime = 120
sprpriority = 5
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State ]
type = Helper
trigger1 = Random < 80
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;-------------------------- intestino
[Statedef 70321]
type    = A
movetype= I
physics = N
anim = 6976
velset = 0,0
ctrl = 0
sprpriority = 3

[State ]
type = Helper
trigger1 = Random < 80
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;-------------------------- muslo
[Statedef 70322]
type    = A
movetype= I
physics = N
anim = 6975
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10


[State ]
type = Helper
trigger1 = Random < 80
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;-------------------------- cadera
[Statedef 70323]
type    = A
movetype= I
physics = N
anim = 6974
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10


[State ]
type = Helper
trigger1 = Random < 80
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;-------------------------- mano
[Statedef 70324]
type    = A
movetype= I
physics = N
anim = 6973
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10


[State ]
type = Helper
trigger1 = Random < 80
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;-------------------------- costillas 2
[Statedef 70325]
type    = A
movetype= I
physics = N
anim = 6972
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10


[State ]
type = Helper
trigger1 = Random < 80
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State x]
type = VarRandom
trigger1 = 1
v = 0
range = ifelse((root, stateno = 19163 || root, stateno = 19174),-8,-2),ifelse((root, stateno = 19163 || root, stateno = 19174),-4,2)
[State y]
type = VarRandom
trigger1 = 1
v = 1
range = -8,-4

[State ]
type = velset
trigger1 = time = 1
x = var(0)-(random*.001)
y = var(1)-(random*.001)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = enemynear,prevstateno != 607716
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;-------------------------------------------------------------
;body part bounceroo
[Statedef 7033]
type    = A
movetype= I
physics = N
ctrl = 0
sprpriority = 3

[State ]
type = Helper
trigger1 = time > 1
trigger1 = Random < 80
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = VarRandom
trigger1 = !time
v = 2
range = 0,1

[State 0, angle]
type = AngleDraw
trigger1 = 1

[State 0, iceangle]
type = AngleAdd
trigger1 = (anim = [70886,70889]) || anim = [708810,708811]
trigger2 = anim = 7070
trigger3 = anim = 6976 || anim = 6975 || anim = 6974 || anim = 6973 || anim = 6972
trigger4 = anim = 80055 || anim = 80056
value = 10

[State ]
type = velset
trigger1 = !time
y = -6

[State ]
type = posset
trigger1 = !time
y = 0

[State ]
type = veladd
trigger1 = 1
y = .3

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State sound de sangre]
type = PlaySnd
triggerall = !time
trigger1 = anim != 7070 && random < 80 && anim != [70886,708820]
trigger1 = random > 50 && anim != [7024,7026]
trigger1 = anim != [80054,80056]
value = 28, 0
channel = -1
volume = -250

[State sound de sangre]
type = PlaySnd
triggerall = !time
trigger1 = anim != 7070 && random < 80 && anim != [70886,708820]
trigger2 = random > 50 && anim = [7024,7026]
trigger3 = random > 50 && anim = [80054,80056]
value = 28, 1
channel = -1
volume = -250

[State sound cabeza]
type = PlaySnd
trigger1 = !time && random < 10 && anim = 7070
value = s0,6
channel = -1
volume = -250

[State sound torso]
type = PlaySnd
trigger1 = !time && random < 10 && anim = 7068
value = F7,1
channel = -1
volume = -250

[State sound hielo]
type = PlaySnd
triggerall = root,stateno != 180 || (root,stateno = 180 && random < 70)
triggerall = !time && random > 5
trigger1 = anim = [70886,70889]
value = 29,0
channel = -1
volume = -250
freqmul = ifelse(!var(2),1,1.5)

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7034
;---------------------------------------------------------------
;-------------------------------------------------------------
;body part bounceroo
[Statedef 7034]
type    = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
sprpriority = 3

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State ]
type = Helper
trigger1 = !time
trigger1 = anim = [6972,6977]
trigger1 = anim != [7024,7026]
trigger1 = anim != [80054,80056]
trigger1 = anim != [70886,708820]
helpertype = Normal
ID = 7016
name = "drop"
postype = p1
pos = 0,0
stateno = 7016
ownpal = 1

[State 23, hielodesaparece]
type = Trans
triggerall = root,win != 1 && !root,fvar(15)
trigger1 = (anim = [70886,70889]) || (anim = [708810,708812]) || (anim = [7024,7026]) || (anim = [6977,6972]) || anim = [80054,80056]
trans = addalpha
alpha=ceil(256-4*(time-5)),ceil(0+4*(time-5))

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,win != 1 && time > 50 && !root,fvar(15)
trigger1 = (anim = [70886,70889]) || (anim = [708810,708812]) || (anim = [7024,7026]) || (anim = [6977,6972]) || anim = [80054,80056]
trigger2 = parentdist x != [-240,240]

[State 0, compatibles]
type = ChangeAnim
trigger1 = !time
trigger1 = anim = 9108092
value = 9108093

[State 0, temblortorso]
type = EnvShake
triggerall = time = 1
trigger1 = anim = 7068
trigger2 = anim = 9108093
time = 7
ampl = -4

[State sound de burn]
type = PlaySnd
trigger1 = !time && anim = [80054,80056]
value = 4, 2
channel = -1
volume = -250

[State sound cabeza]
type = PlaySnd
triggerall = name = "DGBlossom"
trigger1 = !time && anim = 7070
value = F7,0
channel = -1
volume = -250

[State sound torso]
type = PlaySnd
triggerall = name = "DGBlossom"
trigger1 = !time && anim = 7068
value = F7,1
channel = -1
volume = -250

[State sound hielo]
type = PlaySnd
triggerall = random < 70
triggerall = !time
trigger1 = anim = [70886,70889]
trigger2 = anim = [708810,708812]
value = 29,0
channel = -1
volume = -250

[State 0, cabeza]
type = AngleDraw
trigger1 = 1

[State sound hielo]
type = PlaySnd
triggerall = name = "DGBlossom"
trigger1 = !time && anim != 7070 && anim != [70886,708820]
trigger1 = !time && anim != [7024,7026]
trigger1 = !time && anim != [80054,80056]
value = 28, 0
channel = -1
volume = -250

[State sound hielo]
type = PlaySnd
triggerall = name = "DGBlossom"
trigger1 = !time && anim != 7070 && anim != [70886,708820]
trigger2 = !time && anim = [7024,7026]
trigger3 = !time && anim = [80054,80056]
value = 28, 1
channel = -1
volume = -250

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State ]
type = ChangeAnim
Trigger1 = anim != 7068
value = anim
elem = animelemno(0)

;----------------------------------------
;hielo al romperse
[Statedef 70442]
type    = A
movetype= I
physics = N
poweradd= 0
anim = 20000
velset = 0,0
ctrl = 0
sprpriority = 10

;------------------------------- Hielitos
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-15
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-20
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-25
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-30
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-35
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-40
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-35
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-30
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-25
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-20
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "hielo"
postype = p1
pos = 0,-15
stateno = 70443
ownpal = 1
size.xscale = 1
size.yscale = 1

;------------------------------ otras partes
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icehand"
postype = p1
pos = 0,-40
stateno = 70445
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icehand"
postype = p1
pos = 0,-40
stateno = 70445
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icepierna"
postype = p1
pos = 0,-40
stateno = 70446
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icepierna"
postype = p1
pos = 0,-40
stateno = 70446
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icecadera"
postype = p1
pos = 0,-40
stateno = 70447
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icehand"
postype = p1
pos = 0,-40
stateno = 70445
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icehand"
postype = p1
pos = 0,-40
stateno = 70445
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icepierna"
postype = p1
pos = 0,-40
stateno = 70446
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icepierna"
postype = p1
pos = 0,-40
stateno = 70446
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "icecadera"
postype = p1
pos = 0,-40
stateno = 70447
ownpal = 1
size.xscale = 1
size.yscale = 1

;------------------------------ bodyparts
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-65
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-60
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-55
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-50
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-45
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-40
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-45
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-50
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-55
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-60
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
[State ]
type = Helper
trigger1 = time = 1
helpertype = Normal
name = "Icebodypart"
postype = p1
pos = 0,-65
stateno = 70444
ownpal = 1
size.xscale = 1
size.yscale = 1
;---------------------- pedazos de hielo volando
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 6.5,-5
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 7,-3
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 7.5,-1
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 8,0
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 7.5,1
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 7,3
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 6.5,5
ownpal = 1

[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -1,-9
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 1,-9
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -1,9
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = 1,9
ownpal = 1

[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -6.5,-5
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -7,-3
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -7.5,-1
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -8,0
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -7.5,1
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -7,3
ownpal = 1
[State ò_ó]
type = Explod
trigger1 = !time
anim = 70885
Postype = p1
pos = 0,-40
ontop = 1
velocity = -6.5,5
ownpal = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 18
;----------------------------------hielo volando
[Statedef 70443]
type    = A
movetype= A
physics = N
anim = 70886
;velset = 0,-2
ctrl = 0
sprpriority = 6

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -4,-9
[State x]
type = VarRandom
trigger1 = 1
v = 1
range = -3,5

[State 0, Explod]
type = Explod
trigger1 = pos y < -240
trigger1 = parent,stateno = 70442
anim = 70886
ID = 7029
vel = var(1),-10
accel = 0,.3
random = 30,30
removetime = 120
sprpriority = 5
scale = root,const(size.xscale)*(1+root,fvar(2)),root,const(size.yscale)*(1+root,fvar(2))

[State ]
type = Helper
trigger1 = time < 5
trigger1 = parent,stateno != 70443 || parentdist x = [-30,30]
trigger1 = root,stateno != 180 && !root,ctrl && numhelper(70443) < 10
helpertype = Normal
ID = 70443
name = "ice2"
pos = ceil((parent,pos X)-var(0)),ceil(-400-var(1))
stateno = 70443
ownpal = 1

[State ]
type = veladd
trigger1 = time = 2
y = var(0)/2
x = var(1)/2

[State ]
type = veladd
trigger1 = time >= 3
y = .2/2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;---------------------------------- hueso congelado
[Statedef 70444]
type    = A
movetype= A
physics = N
anim = 70889
;velset = 0,-2
ctrl = 0
sprpriority = 6

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -1,-10
[State x]
type = VarRandom
trigger1 = var(1) = 0
v = 1
range = -3,3

[State ]
type = veladd
trigger1 = time = 2
y = var(0)
x = var(1)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;---------------------------------- mano volando
[Statedef 70445]
type    = A
movetype= A
physics = N
anim = 708812
;velset = 0,-2
ctrl = 0
sprpriority = 6

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -1,-10
[State x]
type = VarRandom
trigger1 = var(1) = 0
v = 1
range = -2,1

[State ]
type = veladd
trigger1 = time = 2
y = var(0)
x = var(1)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;---------------------------------- pierna
[Statedef 70446]
type    = A
movetype= A
physics = N
anim = 708810
;velset = 0,-2
ctrl = 0
sprpriority = 6

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -1,-10
[State x]
type = VarRandom
trigger1 = var(1) = 0
v = 1
range = -4,5

[State ]
type = veladd
trigger1 = time = 2
y = var(0)
x = var(1)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;---------------------------------- cadera
[Statedef 70447]
type    = A
movetype= A
physics = N
anim = 708811
;velset = 0,-2
ctrl = 0
sprpriority = 6

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 10

[State y]
type = VarRandom
trigger1 = 1
v = 0
range = -1,-10
[State x]
type = VarRandom
trigger1 = var(1) = 0
v = 1
range = -2,4

[State ]
type = veladd
trigger1 = time = 2
y = var(0)
x = var(1)

[State ]
type = veladd
trigger1 = time >= 3
y = .2

[State ]
type = assertspecial
trigger1 = 1
flag = noshadow

[State end]
type = changestate
triggerall = time >= 5
trigger1 = (Vel Y > 0)&&(Pos Y >= 0)
value = 7033

;=====================================
; Steam Roller Helper
;=====================================

[Statedef 13500]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
anim = 13500
ctrl = 0
sprpriority = 7

;Always bind Steamroller to parent
[State 13500, PosSet]
type = PosSet
trigger1 = 1
x = (Parent, Pos X)
y = (Parent, Pos Y) + 112
;ignorehitpause =
;persistent =

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 5
;ignorehitpause =
;persistent =


;HitDef for Steamroller
[State 3010,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = A, HA ;attr = S, HT
animtype = Hard
hitflag = MAFD
guardflag = HA ;guardflag = M
priority = 3,Miss
damage = 30 ,4
getpower = 0
givepower = 36
sparkno = S2310
;guard.sparkno = S2010
sparkxy = 0,-25
hitsound   = S3500, 0
guardsound = 6, 0
pausetime = 0,0
ground.slidetime = 15
ground.type = High
ground.velocity = 0
guard.velocity = -5.0
air.velocity = -4,-5
yaccel = .4
p2facing = 1
kill = 0
;p1stateno = 3101
p2stateno = 13510
p4stateno = 13510
envshake.time = 45
envshake.freq = 60
envshake.ampl = -9
envshake.phase = 90
;ignorehitpause =

;Change to idle animation after landing
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = parent, stateno = 3501
trigger1 = Pos Y >= 0
value = 13501

;Change to trembling animation during attack
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = parent,  stateno = 3503
triggerall = parent,  anim = 13512
trigger1 = Parent, animelem = 4
trigger2 = Parent, animelem = 9
trigger3 = Parent, animelem = 14
trigger4 = Parent, animelem = 19
trigger5 = Parent, animelem = 24
value = 13502

;Attack Barrage

;[State 3001, Super]
;type = Helper
;triggerall =  parent,  stateno = 3503
;trigger1 = Parent, AnimElem =  5,=0 || Parent, AnimElem =  8,=0 || Parent, AnimElem = 11,=1
;trigger2 = Parent, AnimElem = 14,=0 || Parent, AnimElem = 17,=0 || Parent, AnimElem = 20,=1
;trigger3 = Parent, AnimElem = 23,=0 || Parent, AnimElem = 28,=0
;id = 2006
;name = "Super Arts Effect"
;pos =0, -112
;postype = P1
;stateno = 2005
;helpertype = normal
;keyctrl = 0
;ownpal = 1
;ignorehitpause = 1

;[State 3001, Super]
;type = Explod
;triggerall =  parent,  stateno = 3503
;trigger1 = Parent, animelem = 37
;anim = 9001
;id = 2006
;pos = 0, -112
;postype = P1
;removetime = -2

[State 3112, HitAdd]
type = HitAdd
triggerall =  parent,  stateno = 3503
triggerall = parent,  anim = 13512
trigger1 = Parent, animelem = 4
trigger2 = Parent, animelem = 5
trigger3 = Parent, animelem = 6
trigger4 = Parent, animelem = 7
trigger5 = Parent, animelem = 8
trigger6 = Parent, animelem = 9
trigger7 = Parent, animelem = 10
trigger8 = Parent, animelem = 11
trigger9 = Parent, animelem = 12
trigger10 = Parent, animelem = 13
trigger11 = Parent, animelem = 14
trigger12 = Parent, animelem = 15
trigger13 = Parent, animelem = 16
trigger14 = Parent, animelem = 17
trigger15 = Parent, animelem = 18
trigger16 = Parent, animelem = 19
trigger17 = Parent, animelem = 20
trigger18 = Parent, animelem = 21
trigger19 = Parent, animelem = 22
trigger20 = Parent, animelem = 23
trigger21 = Parent, animelem = 24
trigger22 = Parent, animelem = 25
trigger23 = Parent, animelem = 26
trigger24 = Parent, animelem = 37
value = 1

[State 200,PlaySnd]
type = PlaySnd
triggerall =  parent,  stateno = 3503
triggerall = parent,  anim = 13512
trigger1 = Parent, animelem = 4
trigger2 = Parent, animelem = 5
trigger3 = Parent, animelem = 6
trigger4 = Parent, animelem = 7
trigger5 = Parent, animelem = 8
trigger6 = Parent, animelem = 9
trigger7 = Parent, animelem = 10
trigger8 = Parent, animelem = 11
trigger9 = Parent, animelem = 12
trigger10 = Parent, animelem = 13
trigger11 = Parent, animelem = 14
trigger12 = Parent, animelem = 15
trigger13 = Parent, animelem = 16
trigger14 = Parent, animelem = 17
trigger15 = Parent, animelem = 18
trigger16 = Parent, animelem = 19
trigger17 = Parent, animelem = 20
trigger18 = Parent, animelem = 21
trigger19 = Parent, animelem = 22
trigger20 = Parent, animelem = 23
trigger21 = Parent, animelem = 24
trigger22 = Parent, animelem = 25
trigger23 = Parent, animelem = 26
value = 1982,9

[State 200,PlaySnd]
type = PlaySnd
triggerall =  parent,  stateno = 3503
triggerall = parent,  anim = 13512
trigger1 = Parent, animelem = 4
trigger2 = Parent, animelem = 5
trigger3 = Parent, animelem = 6
trigger4 = Parent, animelem = 7
trigger5 = Parent, animelem = 8
trigger6 = Parent, animelem = 9
trigger7 = Parent, animelem = 10
trigger8 = Parent, animelem = 11
trigger9 = Parent, animelem = 12
trigger10 = Parent, animelem = 13
trigger11 = Parent, animelem = 14
trigger12 = Parent, animelem = 15
trigger13 = Parent, animelem = 16
trigger14 = Parent, animelem = 17
trigger15 = Parent, animelem = 18
trigger16 = Parent, animelem = 19
trigger17 = Parent, animelem = 20
trigger18 = Parent, animelem = 21
trigger19 = Parent, animelem = 22
trigger20 = Parent, animelem = 23
trigger21 = Parent, animelem = 24
trigger22 = Parent, animelem = 25
trigger23 = Parent, animelem = 26
value = 3500,1

[State 200,PlaySnd]
type = PlaySnd
triggerall = parent, stateno = 3503
trigger1 = Parent, animelem = 37
value = 5,3

[State 3112, Combo]
type = VarAdd
triggerall =  parent,  stateno = 3503
triggerall = parent,  anim = 13512
trigger1 = Parent, animelem = 4
trigger2 = Parent, animelem = 5
trigger3 = Parent, animelem = 6
trigger4 = Parent, animelem = 7
trigger5 = Parent, animelem = 8
trigger6 = Parent, animelem = 9
trigger7 = Parent, animelem = 10
trigger8 = Parent, animelem = 11
trigger9 = Parent, animelem = 12
trigger10 = Parent, animelem = 13
trigger11 = Parent, animelem = 14
trigger12 = Parent, animelem = 15
trigger13 = Parent, animelem = 16
trigger14 = Parent, animelem = 17
trigger15 = Parent, animelem = 18
trigger16 = Parent, animelem = 19
trigger17 = Parent, animelem = 20
trigger18 = Parent, animelem = 21
trigger19 = Parent, animelem = 22
trigger20 = Parent, animelem = 23
trigger21 = Parent, animelem = 24
trigger22 = Parent, animelem = 25
trigger23 = Parent, animelem = 26
trigger24 = Parent, animelem = 37
var(26) = 1

[State 3110,TargetLifeAdd]
type = TargetLifeAdd
triggerall =  parent,  stateno = 3503
triggerall = parent,  anim = 13512
trigger1 = Parent, animelem = 4
trigger2 = Parent, animelem = 5
trigger3 = Parent, animelem = 6
trigger4 = Parent, animelem = 7
trigger5 = Parent, animelem = 8
trigger6 = Parent, animelem = 9
trigger7 = Parent, animelem = 10
trigger8 = Parent, animelem = 11
trigger9 = Parent, animelem = 12
trigger10 = Parent, animelem = 13
trigger11 = Parent, animelem = 14
trigger12 = Parent, animelem = 15
trigger13 = Parent, animelem = 16
trigger14 = Parent, animelem = 17
trigger15 = Parent, animelem = 18
trigger16 = Parent, animelem = 19
trigger17 = Parent, animelem = 20
trigger18 = Parent, animelem = 21
trigger19 = Parent, animelem = 22
trigger20 = Parent, animelem = 23
trigger21 = Parent, animelem = 24
trigger22 = Parent, animelem = 25
trigger23 = Parent, animelem = 26
value = -20
kill = 0

;Final Hit
[State 3110,TargetLifeAdd]
type = TargetLifeAdd
triggerall =  parent,  stateno = 3503
trigger1 = Parent, AnimElem = 37,=0
value = -150
kill = root, var(57)

;Final Hit Earthquake
[State 0, EnvShake]
type = EnvShake
triggerall =  parent,  stateno = 3503
trigger1 = Parent, AnimElem = 37,=0
time = 30
freq = 60
ampl = -8
phase = 90
;ignorehitpause =
;persistent =




;---- End Steam Roller sequence, no KO ---
;Custom state to send opponent flying
[State 0, TargetState]
type = TargetState
;triggerall = P2Life > 0
trigger1 = parent,  stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
value = 13511
ID = -1
;ignorehitpause =
;persistent =

[State 0, TargetState]
type = TargetState
trigger1 = parent,  stateno = 3502
trigger1 = RoundState > 2
value = 13512

;Create helpers for flying steamroller wreckage
;-----------
[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13550
name = "Steamroller Wreckage I"
pos = -3, -52
postype = P1
stateno = 13550
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1

[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13551
name = "Steamroller Wreckage II"
pos = 30, -96
postype = P1
stateno = 13551
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1

[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13552
name = "Steamroller Wreckage III"
pos = -62, -82
postype = P1
stateno = 13552
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1

[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13553
name = "Steamroller Wreckage IV"
pos = -75, -95
postype = P1
stateno = 13553
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1

[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13554
name = "Steamroller Wreckage V"
pos = -106, -90
postype = P1
stateno = 13554
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1

[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13555
name = "Steamroller Wreckage VI"
pos = -101, -66
postype = P1
stateno = 13555
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1

[State 0, Helper]
type = Helper
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
helpertype = normal ;player
persistent = 0
id = 13556
name = "Steamroller Wreckage VII"
pos = -151, -76
postype = P1
stateno = 13556
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999
size.xscale  = 0.833
size.yscale  = 1
;-----------
;Play explosion sound
[State 0, PlaySnd]
type = PlaySnd
;triggerall = P2Life > 0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2
value = 3500,4
volume = 0
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

;Destroy self when attack phase is over
[State 13500, DestroySelf]
type = DestroySelf
;triggerall = P2StateType != L
;triggerall = P2Life !=0
trigger1 = parent, stateno = 3503
trigger1 = Parent, AnimElem = 37,=1
trigger2 = parent, stateno = 3502
trigger2 = target, stateno != 13510 || RoundState > 2

; ---KO Events for Steam Roller---
;Change to idle animation when opponent is KO'ed.
[State 0, ChangeState]
type = ChangeAnim
trigger1 =  root,  anim = 13520
trigger1 = root, AnimElem = 12
value = 13501

;Final Hit
[State 3110,TargetLifeAdd]
type = TargetLifeAdd
trigger1 =  root,  anim = 13520
trigger1 = root, AnimElem = 12
value = -9999
kill = 1

[State 0, TargetState]
type = TargetState
trigger1 =  root,  anim = 13520
trigger1 = root, AnimElem = 12
value = 5150 ;13512
ID = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  root,  anim = 13520
trigger1 = root, AnimElem = 12
value = 3500,3

[State 0, EnvColor]
type = EnvColor
trigger1 =  root,  anim = 13520
trigger1 = root, AnimElem = 12
value = 255,255,255
time = 8

;Shake Screen
[State 0, EnvShake]
type = EnvShake
trigger1 =  root,  anim = 13520
trigger1 = root, AnimElem = 12
time = 60
freq = 45
ampl = -9
phase = 90


;-----------------------------------------------------
;Under Steamroller Custom State
[Statedef 13510]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = -2

[State 1506, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3005, 2] ;Airborne opponents fall to ground
type = PosAdd
trigger1 = Pos Y < 0
Y = 14

[State 3668, ChangeAnim]
type = ChangeAnim2
trigger1 = Time = 0
value = 13517

[Stage 3668, End]
type = ChangeState
trigger1 = Time = 30
trigger1 = Life = 0
trigger1 = !win
value = 5110
ctrl = 0

[Stage 3668, End]
type = ChangeState
trigger1 = Time > 1500
value = 0
ctrl = 1

;-----------------------------------------------------
;Steamroller knock away Custom State
[Statedef 13511]
type = A
movetype = H
physics = N
velset = -9,-9
ctrl = 0

[State 1509, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1509, Palfx]
type = Palfx
trigger1 = Time = 0
time = 45
add = 240,50,0
mul = 250,224,120
sinadd = 110,55,85,10
invertall = 0
color = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0
value = 5030
persistent = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5030 && AnimTime = 0
value = 5050

[State 1509, veladd]
type = veladd
trigger1 = 1
y = .4

[State 1509, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;-----------------------------------------------------
;Steamroller KO Custom State
[Statedef 13512]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1509, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1509, Palfx]
type = Palfx
trigger1 = Time = 0
time = 20
add = 240,50,0
mul = 250,224,120
sinadd = 110,55,85,10
invertall = 0
color = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0
value = 5030
persistent = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5030 && AnimTime = 0
value = 5050

[State 1509, veladd]
type = veladd
trigger1 = 1
y = .4

[State 1509, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;======================================
;Steam Roller Wreckage 1
;======================================

[Statedef 13550]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 3,-3
anim = 13550
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;======================================
;Steam Roller Wreckage 2
;======================================

[Statedef 13551]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 2,-4
anim = 13551
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;======================================
;Steam Roller Wreckage 3
;======================================

[Statedef 13552]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 1,-5
anim = 13552
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;======================================
;Steam Roller Wreckage 4
;======================================

[Statedef 13553]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,-6
anim = 13553
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;======================================
;Steam Roller Wreckage 5
;======================================

[Statedef 13554]
type    = S
movetype= A
physics = N
juggle  = 1
velset = -1,-5
anim = 13554
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;======================================
;Steam Roller Wreckage 6
;======================================

[Statedef 13555]
type    = S
movetype= A
physics = N
juggle  = 1
velset = -3,-4
anim = 13555
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;======================================
;Steam Roller Wreckage 7
;======================================

[Statedef 13556]
type    = S
movetype= A
physics = N
juggle  = 1
velset = -2,-3
anim = 13556
ctrl = 0

[State 0, No Shadow]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 3005, Gravity]
type = VelAdd
trigger1 = 1
y = 0.40

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 240

;---------------------------------------------------------------------------
; BFR Helper
;---------------------------------------------------------------------------
[Statedef 19751]
type    = A
movetype= A
physics = N
juggle  = 5
poweradd= 0
anim = 19751
sprpriority = 6

[State 0, VelSet]
type = VelSet
trigger1 = time >= 0
x = 7

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 3005, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,AA,AP,AT
forceair = 1
stateno= 19753

[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,AP
;value2 = S,NA
time = 1
ignorehitpause = 1
persistent = 1

[State 210, 2]
type = HitDef
trigger1 = Time > 0
attr = S, HP
priority  = 5
;hitflag = MAFDP
guardflag = MA
damage    = 100,50
animtype  = High
getpower  = 0
givepower = 0
pausetime = 0,4
sparkno = 1
sparkxy = 0, 0
;hitsound   = S1986,1
;guardsound = S1986,1
ground.type = High
ground.slidetime = 1
ground.hittime  = 12
ground.velocity = -5, -12
guard.velocity = -20
air.type = High
air.velocity = -5,-12
airguard.velocity = -3,-3
air.juggle = 3
fall.animtype = Hard
fall = 1
fall.recover = 0
p2stateno = ifelse(root,Var(57),19759,19758)
palfx.time = 60
palfx.add = 240,0,0
palfx.mul = 250,0,0
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
kill = 1
guard.kill = 1

;[State 0, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
persistent = 1
value = 9750, 2
loop = 1
abspan = 1
channel = 4

[State 0, EnvShake]
type = envshake
trigger1 = Time = 0
time = 9999
ampl = 7
freq = 166

[State 0, Helper]
type = Helper
trigger1 = Time > 0
helpertype = normal ;player
name = "BFR Zap"
ID = 19754
stateno = 19754
pos = 0,0
;postype = back    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 0

[State 0, Helper]
type = Helper
trigger1 = MoveContact
helpertype = normal ;player
name = "BFR Explosion"
ID = 19753
stateno = 19753
pos = 0,0
;postype = 1    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 0

[State 210, 5]
type = ChangeState
trigger1 = MoveContact || (frontedgedist <= -90 || backedgedist <= -90) && time > 5
value = 19752
ctrl = 1

;--------------------------------------------------------------------------------------------
[Statedef 19752]
type    = A
movetype= A
physics = N
ctrl = 0

[State 0, EnvShake]
type = envshake
trigger1 = Time = 0
time = 1
ampl = 7
freq = 166

[State 3000, PlaySnd]
type = StopSnd
trigger1 = 1
channel = 4

[State 210, 5]
type = destroyself
trigger1 = Time > 0

;--------------------------------------------------------------------------------------------

[Statedef 19753]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 19752
sprpriority = 6

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 3000, PlaySnd]
type = StopSnd
trigger1 = 1
channel = 4

[State 3000, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = 9750, 3

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
;hitflag = MAFDP
guardflag = MA
damage    = 150,75
animtype  = High
getpower  = 0
givepower = 0
pausetime = 0,4
sparkno = 1
sparkxy = 0, 0
;hitsound   = S1986,1
;guardsound = S1986,1
ground.type = High
ground.slidetime = 1
ground.hittime  = 12
ground.velocity = -4, -18
guard.velocity = -20
air.type = High
air.velocity = -5,-12
airguard.velocity = 3,-3
air.juggle = 3
fall.animtype = Hard
fall = 1
fall.recover = 0
p2stateno = ifelse(root,Var(57),19759,19758)
palfx.time = 60
palfx.add = 240,0,0
palfx.mul = 250,0,0
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
kill = 1
guard.kill = 1

[State 3900, 1]
type = Explod
trigger1 = Time = 0
anim = 19754
postype = left
bindtime = -1
sprpriority = 9
ownpal = 1
scale = 1.5,1.5

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "BFR Final Zap"
ID = 19755
stateno = 19755
pos = 0,0
;postype = back    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 0

[State 0, EnvShake]
type = envshake
trigger1 = AnimElem = 1
time = 100
freq = 166
ampl = 14

[State 210, 5]
type = destroyself
trigger1 = AnimTime = 0

;--------------------------------------------------------------------------------------------

[Statedef 19754]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 19753
sprpriority = 6

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
;hitflag = MAFDP
guardflag = MA
damage    = 8,4
animtype  = High
getpower  = 0
givepower = 0
pausetime = 0,4
sparkno = 0
sparkxy = 0, 0
;hitsound   = S1986,1
;guardsound = S1986,1
ground.type = High
ground.slidetime = 1
ground.hittime  = 12
ground.velocity = -4, -18
guard.velocity = -20
air.type = High
air.velocity = -5,-12
airguard.velocity = 3,-3
air.juggle = 3
fall.animtype = Hard
fall = 1
fall.recover = 0
p2stateno = ifelse(root,Var(57),19759,19758)
palfx.time = 60
palfx.add = 240,0,0
palfx.mul = 250,0,0
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
kill = 1
guard.kill = 1

[State 210, 5]
type = destroyself
trigger1 = Time > 0

;-------------------------------------------------------------------------------------------

[Statedef 19755]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 19753
sprpriority = 6

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
;hitflag = MAFDP
guardflag = MA
damage    = 150,75
animtype  = High
getpower  = 0
givepower = 0
pausetime = 0,4
sparkno = 0
sparkxy = 0, 0
;hitsound   = S1986,1
;guardsound = S1986,1
ground.type = High
ground.slidetime = 1
ground.hittime  = 12
ground.velocity = -4, -18
guard.velocity = -20
air.type = High
air.velocity = -5,-12
airguard.velocity = 3,-3
air.juggle = 3
fall.animtype = Hard
fall = 1
fall.recover = 0
p2stateno = ifelse(root,Var(57),19759,19758)
palfx.time = 60
palfx.add = 240,0,0
palfx.mul = 250,0,0
palfx.sinadd = 110,55,85,10
palfx.invertall = 0
palfx.color = 0
kill = 1
guard.kill = 1

[State 210, 5]
type = destroyself
trigger1 = Time > 0

;-------------------------------------------------------------------------------------------

[Statedef 19756]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 20000

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, Helper]
type = Helper
trigger1 = Time = 0
helpertype = normal ;player
name = "BFR Charge"
ID = 19757
stateno = 19757
postype = p1
pos = -4,-20
;postype = back    ;p2,front,back,left,right
;facing = 1
keyctrl = 0
ownpal = 1

[State 190, Concentrando gelo]
type=helper
trigger1=time%7&&numhelper(191)<8
helpertype=normal
stateno=3304
ID=191
name="Power Particle"
postype=p1
pos=ceil(240-random/2.1),-ceil(random/4)
size.yscale = .15
size.xscale = .15
supermovetime = 400
pausemovetime = 400

[State 3101, BFRCharge2]
type = explod
trigger1 = Time = 140
anim = 19751
sprpriority = 6
removetime = 6
postype = p1
pos = -5,-19
removeongethit = 1

[State 3101, BFRCharge3]
type = explod
trigger1 = Time = 146
anim = 19751
sprpriority = 6
removetime = 4
postype = p1
pos = -1,-19
removeongethit = 1

[State 0, BindToParent]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0

[State 210, 5]
type = destroyself
trigger1 = Time >= 147

[Statedef 19757]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 19751
sprpriority = 6

[State 0, BindToParent]
type = BindToRoot
trigger1 = 1
time = 1
pos = -4,-20

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = Time = 0
flag = invisible

[State 4001, Fade In]
type=palfx
trigger1= !Time
time=155
add = -255,-255,-255
sinadd=255,255,255,600

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 140

;-------------------------------------------------------------------------------------------

[Statedef 19759]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, HitShakeOver]
type = VelSet
trigger1 = Time = 2
x = -4
y = -18
persistent = 0

;[State 1509, Palfx]
;type = Palfx
;trigger1 = Time = 0
;time = 20
;add = 39,0,78
;mul = 110,0,220
;color = 100

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0
value = 5030
persistent = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5030 && AnimTime = 0
value = 5050

[State 1509, veladd]
type = veladd
trigger1 = Time > 2
y = .4

[State 1509, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;-------------------------------------------------------------------------------------------

[Statedef 19758]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, HitShakeOver]
type = VelSet
trigger1 = Time = 2
x = -4
y = -18
persistent = 0

;[State 1509, Palfx]
;type = Palfx
;trigger1 = Time = 0
;time = 20
;add = 39,0,78
;mul = 110,0,220
;color = 100

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0
value = 5030
persistent = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5030 && AnimTime = 0
value = 5050

[State 1509, veladd]
type = veladd
trigger1 = Time > 2
y = .4

[State 0, ChangeState]
type = ChangeState
trigger1 = Life = 0
value = 197580

[State 1509, SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;------------
; KO Sequence

[Statedef 197580]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 0, HitShakeOver]
type = VelSet
trigger1 = Time = 2
x = -4
y = -18
persistent = 0

;[State 1509, Palfx]
;type = Palfx
;trigger1 = Time = 0
;time = 20
;add = 39,0,78
;mul = 110,0,220
;color = 100

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0
value = 5030
persistent = 0

[State 1506, ChangeAnim2]
type = ChangeAnim
trigger1 = anim = 5030 && AnimTime = 0
value = 5050

[State 1509, veladd]
type = veladd
trigger1 = Time > 2
y = .4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = SCA

[State 4001, Fade Out]
type=palfx
trigger1 = !Time
time=24
sinadd=-255,-255,-255,120
persistent = 0

[State 0, HitShakeOver]
type = VelSet
trigger1 = Time = 24
x = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Time = 24
value = 5150

